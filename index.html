<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>The world of mail.gem (maybe) not you know.</title><link rel="stylesheet" href="css/reveal.min.css"><link rel="stylesheet" href="css/theme/white.css"><link rel="stylesheet" href="lib/css/zenburn.css"><link rel="stylesheet" href="css/font-awesome.min.css"><link rel="stylesheet" href="css/my.css"><script>var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );</script><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></head><body><div class="reveal"><div class="slides"><section><h1>The world of mail.gem (maybe) not you know.</h1><p>2018-06-07</p><p>表参道.rb #35</p><p>うなすけ</p></section><section><h2>about me</h2><div class="flex-container"><div class="item-40"><img src="img/icon_raw.jpg" alt="icon"></div><div class="item-60"><ul><li>name: うなすけ(unasuke)</li><li>Bank, inc</li><ul><li><a href="https://bank.co.jp">https://bank.co.jp</a></li></ul><li>engineer (server side)</li><br><li>twitter&nbsp;<i class="fa fa-twitter"></i>:&nbsp;<a href="https://twitter.com/yu_suke1994">@yu_suke1994</a></li><li>GitHub&nbsp;<i class="fa fa-github"></i>:&nbsp;<a href="https://github.com/unasuke">@unasuke</a></li></ul></div></div></section><section><img src="img/cfp-app.png"></section><section><h2><s>RejectKaigi</s></h2><h2>RejectLTKaigi</h2><small>a.k.a. omotesando.rb</small></section><section><h1>The world of mail.gem (maybe) not you know.</h1><p>2018-06-07</p><p>表参道.rb #35</p><p>うなすけ</p></section><section><h2>Do you know mail.gem ?</h2></section><section><img src="img/rubygems-org-mail.png"><a href="https://rubygems.org/gems/mail">https://rubygems.org/gems/mail</a></section><section><p>see also 'actionmailer'</p><img src="img/rubygems-org-actionmailer.png"><a href="https://rubygems.org/gems/actionmailer">https://rubygems.org/gems/actionmailer</a></section><section><p>ok.</p></section><section><h2>2018-04-14</h2></section><section><h2>2018-04-14 asakusarb#456</h2><p>koic & yahonda says...</p><img src="https://pbs.twimg.com/profile_images/674206748895371265/FH1O0n_l_400x400.png"><img src="https://pbs.twimg.com/profile_images/275691649/n694722665_8206_400x400.jpg"></section><section><p>「誰かやってくれないかな〜〜」</p></section><section><p>ぼく 「やったらぁ！！！！」</p></section><section><h2>WHAT?</h2></section><section><h2>Rails CI</h2><img src="img/rails-actionmailer-ci-apr.png"><a href="https://travis-ci.org/rails/rails/jobs/365773392">https://travis-ci.org/rails/rails/jobs/365773392</a></section><section><h2>many many warning messages!!!</h2><p>in ruby-head</p></section><section><img src="img/ruby-case-when-outdated.png"></section><section><h2>mail.gem</h2><img src="img/rails-actionmailer-ci-apr.png"></section><section><p>parsers/content_type_parser.rb</p><img src="img/part-of-mail-gem-in-apr.png"><a href="https://github.com/mikel/mail/blob/fbc5d91ae9b68b3c4ad450a22055a74dfce1caf9/lib/mail/parsers/content_type_parser.rb#L821-L831">on GitHub</a></section><section><p>?!?!</p><img src="img/part-of-mail-gem-in-apr.png"></section><section><p>file lists</p><img src="img/mail-gem-files.png"><a href="https://github.com/mikel/mail/tree/fbc5d91ae9b68b3c4ad450a22055a74dfce1caf9/lib/mail/parsers">on GitHub</a></section><section><p>.rl ?????</p><img src="img/mail-gem-files.png"></section><section><p>ragel???!?!?!?</p><img src="img/mail-gem-rake-before.png"><a href="https://github.com/mikel/mail/blob/6bc16b4bce4fe280b19523c939b14a30e32a8ba4/tasks/ragel.rake#L19-L22">on GitHub</a></section><section><h2>What is Ragel?</h2><img src="img/rubima-ragel.png"><a href="https://magazine.rubyist.net/articles/0023/0023-Ragel.html">https://magazine.rubyist.net/articles/0023/0023-Ragel.html</a></section><section><h2>What is Ragel?</h2><blockquote>Ragel とは、Adrian Thurston によって作られたステートマシンコンパイラです。 Ragel を使うと、コンパイラやパーサの字句解析部を簡単に作れます。 また Ragel は複数の言語に対応しており、現在のところ C/C++/Objective-C/D/Java/Ruby のソースコードを生成することができます。</blockquote><a href="https://magazine.rubyist.net/articles/0023/0023-Ragel.html">https://magazine.rubyist.net/articles/0023/0023-Ragel.html</a></section><section><h2>What is Ragel?</h2><img src="img/ragel-official-webpage.png"><a href="http://www.colm.net/open-source/ragel/">http://www.colm.net/open-source/ragel/</a></section><section><h2>Ragel code</h2><img src="img/ragel-code-in-mail.png"><a href="https://github.com/mikel/mail/blob/6bc16b4bce4fe280b19523c939b14a30e32a8ba4/lib/mail/parsers/address_lists_parser.rl#L51-L58">on GitHub</a></section><section><h2>Let's dev Ragel!</h2><img src="img/clone-ragel.png"><p>Way to compile ragel is undocument in README....</p></section><section><h2>Let's dev Ragel!</h2><h3>Ragel's README</h3><blockquote>
REQUIRED DEPENDENCIES
---------------------

Colm is a mandatory dependency.

http://www.colm.net/files/colm/colm-0.13.0.3.tar.gz

Either install this to your path or configure the location using
--with-colm=DEST and pass it the prefix colm was installed to.</blockquote></section><section><p class="big">Colm is a mandatory dependency.</p></section><section><h2 class="big">What's Colm?</h2><small>yak shaving...</small></section><section><h2>What is Colm?</h2><img src="img/colm-official-webpage.png"><a href="http://www.colm.net/open-source/colm/">http://www.colm.net/open-source/colm/</a></section><section><h2 class="big">Colm Programming Language</h2></section><section><img src="https://emojipedia-us.s3.amazonaws.com/thumbs/120/apple/129/shocked-face-with-exploding-head_1f92f.png" width="400px"></section><section><h2>Ok...</h2><p>I should find another method.</p></section><section><h2>How to format ugly code? </h2><img src="img/gofmt.png"></section><section><h2>How to format ugly code? </h2><h3>We know RuboCop</h3><blockquote>-a/--auto-correct	Auto-correct certain offenses. Note: Experimental - use with caution.</blockquote><small><a href="https://rubocop.readthedocs.io/en/latest/basic_usage/">https://rubocop.readthedocs.io/en/latest/basic_usage/</a></small></section><section><h2>How to format ugly code? </h2><h3>We know RuboCop</h3><p>But, RuboCop is not code formatter.</p><blockquote>RuboCop is a Ruby static code analyzer.</blockquote><small><a href="https://rubocop.readthedocs.io/en/latest/">https://rubocop.readthedocs.io/en/latest/</a></small></section><section><h2>How to format ugly code? </h2><img src="img/google-ruby-code-formatter.png"></section><section><h2>How to format ugly code? </h2><h3>ruby-formatter/rufo</h3><blockquote>Rufo is as an opinionated ruby formatter, intended to be used via the command line as a text-editor plugin, to autoformat files on save or on demand.</blockquote><a href="https://github.com/ruby-formatter/rufo">https://github.com/ruby-formatter/rufo</a></section><section><h2>How to format ugly code? </h2><h3>ruby-formatter/rufo</h3><p class="big">It seems good!</p></section><section><h2>How to format ugly code? </h2><p>ragel → ugly ruby code → rufo → clean ruby code</p><img src="img/rake-task-but-this-is-fail.png"></section><section><h2 class="big">Rake task fail!!</h2></section><section><img src="https://emojipedia-us.s3.amazonaws.com/thumbs/120/apple/129/smiling-face-with-halo_1f607.png" width="400px"></section><section><h2>ruby/rake #39</h2><img src="img/rake-pullreq-39.png"><a href="https://github.com/ruby/rake/pull/39">https://github.com/ruby/rake/pull/39</a></section><section><h2>So...</h2><p>I submitted 2 pull requests(were merged!)</p><ul><li><a href="https://github.com/mikel/mail/pull/1221">https://github.com/mikel/mail/pull/1221</a></li><li><a href="https://github.com/mikel/mail/pull/1222">https://github.com/mikel/mail/pull/1222</a></li></ul></section><section><h2>So...</h2><p>I submitted 2 pull requests(were merged!)</p><img src="img/mail-gem-pull-req-1221.png"><a href="https://github.com/mikel/mail/pull/1221">https://github.com/mikel/mail/pull/1221</a></section><section><h2>So...</h2><p>I submitted 2 pull requests(were merged!)</p><img src="img/mail-gem-pull-req-1222.png"><a href="https://github.com/mikel/mail/pull/1222">https://github.com/mikel/mail/pull/1222</a></section><section><h2>conclusion</h2><ul><li>You know Ragel and Colm now</li><li>mail.gem's code generated by Ragel</li></ul></section></div></div><script src="lib/js/head.min.js"></script><script src="js/reveal.min.js"></script><script>// More info https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
  history: true,
  transition: 'none',
  backgroundTransition: 'none',
  // More info https://github.com/hakimel/reveal.js#dependencies
  dependencies: [
    { src: 'plugin/markdown/marked.js' },
    { src: 'plugin/markdown/markdown.js' },
    { src: 'plugin/notes/notes.js', async: true },
    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
  ]
});</script></body></html>